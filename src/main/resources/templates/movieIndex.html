<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/ui :: head(${'Page Title • NMS Cinemas'})}"></head>
<body>
<div th:replace="~{fragments/ui :: navbar('movies')}"></div>
<main class="container">
  <p>Browse all movies currently in the database.</p>

  <p><a href="/movies/new">+ Create Movie</a></p>
  <p th:if="${successMessage}" class="alert success" th:text="${successMessage}"></p>
  <p th:if="${errorMessage}" class="alert error" th:text="${errorMessage}"></p>

  <table>
	    <thead>
	  <tr>
	    <th>Title</th>
	    <th>Genre</th>
	    <th>Language</th>
	    <th>Duration (min)</th>
	    <th>Rating</th>
	    <th>Release Date</th>
	    <th>Actions</th>
	  </tr>
	</thead>
	<tbody>
	  <tr th:if="${#lists.isEmpty(movies)}">
	    <td colspan="7">No movies found.</td>
	  </tr>
	  <tr th:each="m : ${movies}">
	    <td th:text="${m.title}">Title</td>
	    <td th:text="${m.genre}">Genre</td>
	    <td th:text="${m.language}">Language</td>
	    <td th:text="${m.duration}">0</td>
	    <td th:text="${m.rating} ?: '-'">-</td>
	    <td th:text="${m.releaseDate}">2025-01-01</td>
	    <td>
	      <a th:href="@{/movies/{id}/edit(id=${m.idmovies})}">Edit</a>
	      |
	      <form th:action="@{/movies/{id}/delete(id=${m.idmovies})}" method="post" style="display:inline;">
	        <button type="submit" onclick="return confirm('Delete this movie?');">Delete</button>
	      </form>
	    </td>
	  </tr>
	</tbody>
  </table>

  <p><a href="/">← Back to Home</a></p>
</main>

<div th:replace="~{fragments/ui :: footer}"></div>

</body>
</html>
